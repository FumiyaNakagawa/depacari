<div class="container-fluid">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <div class="row">
        <div class="col-12 mb-3">
          <h3 class="text-center">
            <%= @product.name %>
          </h3>
        </div>
        <div class="col-md-6">
          <!-- カルーセル部分  -->
          <div id="carousel1" class="carousel slide" data-interval=0 data-ride="carousel">
            <ol class="carousel-indicators">
              <% @images.each_with_index do |image, i| %>
                <% if i == 0 && image.image.url %>
                  <li data-target="#carousel1" data-slide-to=i class="active"></li>
                <% elsif image.image.url %>
                  <li data-target="#carousel1" data-slide-to=i></li>
                <% end %>
              <% end %>
            </ol>
            <div class="carousel-inner" role="listbox">
              <% @images.each_with_index do |image, i| %>
                <% if i == 0 && image.image.url %>
                  <div class="carousel-item active">
                    <%= image_tag image.image.url, class: 'd-block w-100' if image.image.url %>
                  </div>
                <% elsif image.image.url %>
                  <div class="carousel-item">
                    <%= image_tag image.image.url, class: 'd-block w-100' if image.image.url %>
                  </div>
                <% end %>
              <% end %>
            </div>
            <a class="carousel-control-prev" href="#carousel1" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon p-3" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carousel1" role="button" data-slide="next">
              <span class="carousel-control-next-icon p-3" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>

        </div>

        <div class="col-md-6">
          <div class="table-responsive">
            <table class="table">
                <tr>
                  <th scope="row">商品名</th>
                  <td><%= @product.name %></td>
                </tr>
                <tr>
                  <th scope="row">商品の状態</th>
                  <td><%= @product.condition %></td>
                </tr>
            </table>
          </div>
          <p class="ml-3 h5"><%= @product.details %></p>
        </div>

        <div class="col-12 text-center mt-3">
          <span class='h3'>￥<%= @product.price %></span>
          <span class='h6'>(税込)</span>
          <span class='h5'>送料込み</span>
        </div>

        <% if @product.status == "sold" %>
          <p class="text-danger h4">売り切れました!</p>
          <% if logged_in? && current_user.id == @order.user_id || logged_in? && current_user.id == @product.user_id %>
            <%= link_to transaction_user_product_transaction_path(product_id: @product.id), class: 'btn btn-success w-100 p-3 mt-3' do %>
              <span class='h4'>取引画面へ進む</span>
            <% end %>
          <% end %>
        <% else %>
          <% if logged_in? %>
            <% if current_user.id == @product.user_id %>
              <%= link_to edit_user_product_path, class: 'btn btn-primary w-100 p-3 mt-3' do %>
                <span class='h4'>編集する</span>
              <% end %>
            <% else %>
              <%= link_to new_user_product_orders_path(product_id: @product.id), class: 'btn btn-danger w-100 p-3 mt-3' do %>
                <span class='h4'>購入画面に進む</span>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>